{% extends "base.html" %}
{% block title %}Product page{% endblock %}
{% block content %}
    {% if content %}
        <!---------------------------------------------------------------------------------------------->
        <main class="my-5" onload="loadProductPage()">
            <div class="container">
                <!--Section: Content-->
                <section class="text-center">
                    <h4 class="mb-5"><strong>Our products</strong></h4>
                    {% for product in productlist %}
                        <div class="col-lg-4 col-md-6 mb-4 boxwidth" id="product{{ product.product_id }}">
                            <div class="card" id="{{ product.product_id }}">
                                <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                                    <div id="carouselExampleControls{{ product.product_id }}" class="carousel carousel-dark slide"
                                         data-bs-ride="carousel" data-bs-interval="false">
                                        <div class="carousel-inner">
                                            {% for image in imagelist %}
                                                {% if image.product_connection == product.product_id %}
                                                    {% if image.main_image == True %}
                                                        <div class="carousel-item active">
                                                            <img src="
                                                                    {{ url_for('static', filename='images/') }}{{ image.img }}"
                                                                 class="d-block"
                                                                 alt="{{ product.product_description }}">
                                                        </div>
                                                    {% else %}
                                                        <div class="carousel-item">
                                                            <img src="
                                                            {{ url_for('static', filename='images/') }}{{ image.img }}"
                                                                 class="d-block"
                                                                 alt="{{ product.product_description }}">
                                                        </div>
                                                    {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        </div>

                                        <button class="carousel-control-prev" type="button"
                                                data-bs-target="#carouselExampleControls{{ product.product_id }}"
                                                data-bs-slide="prev"
                                                id="prev-btn{{ product.product_id }}">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="visually-hidden">Previous</span>
                                        </button>
                                        <button class="carousel-control-next" type="button"
                                                data-bs-target="#carouselExampleControls{{ product.product_id }}"
                                                data-bs-slide="next"
                                                id="next-btn{{ product.product_id }}"
                                        >
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="visually-hidden">Next</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h5 class="card-title">{{ product.product_name }}</h5>
                                    <p class="card-text">
                                        {{ product.product_description }}
                                    </p>
                                    <p>$ {{product.product_price}},- </p>
                                    <!-- Buttons trigger collapse -->
                                    <a
                                            class="btn btn-primary"
                                            data-mdb-toggle="collapse"
                                            href="#multiCollapseExample{{ product.product_id }}"
                                            role="button"
                                            aria-expanded="false"
                                            aria-controls="multiCollapseExample{{ product.product_id }}"
                                            onclick="myFunction({{product.product_id}})"
                                    >
                                        More info
                                    </a>
                                    <a class="btn btn-success" onclick="addToCart()">Add to cart</a>
                                    <!-- Collapsed content -->
                                    <div class="row">
                                            <div class="collapse multi-collapse mt-3" id="multiCollapseExample{{ product.product_id }}">
                                                {{ product.product_long_description }}
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </section>
            </div>
        </main>
        <div id="test"> </div>
    {% endif %}
   <script type="text/javascript" src="{{ url_for('static', filename='js/products.js') }}"></script>
{% endblock %}-->